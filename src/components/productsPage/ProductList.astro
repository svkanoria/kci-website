---
import { getPageLinks, mapPageLinks } from "../../utils";
import ProductListItem from "./ProductListItem.astro";

const links = await getPageLinks(
  import.meta.glob("../../pages/products/*.{astro,md,mdx,html}")
);
---

<ul class="flex flex-col p-4 md:p-8">
  {
    mapPageLinks(
      (links, group) => (
        <>
          <li>{group}</li>
          {links.map((link) => (
            <ProductListItem pageLink={link} />
          ))}
        </>
      ),
      links
    )
  }
</ul>
